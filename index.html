<html lang="pt-br"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor de Etiquetas Arrastáveis</title>
    <style>
        :root { --p: #007bff; --s: #28a745; --danger: #dc3545; }
        body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Painel Lateral */
        .sidebar { width: 350px; background: #fff; border-right: 1px solid #ddd; padding: 20px; display: flex; flex-direction: column; box-shadow: 2px 0 10px rgba(0,0,0,0.1); z-index: 10; }
        .sidebar h2 { font-size: 18px; margin: 0 0 20px 0; color: #333; border-bottom: 2px solid var(--p); padding-bottom: 10px; }
        
        .control-group { margin-bottom: 15px; background: #f9f9f9; padding: 10px; border-radius: 8px; border: 1px solid #eee; }
        .control-group label { display: block; font-size: 12px; font-weight: bold; color: #666; margin-bottom: 5px; }
        
        input[type="range"] { width: 100%; margin-bottom: 10px; cursor: pointer; }
        input[type="number"] { width: 60px; padding: 4px; border: 1px solid #ccc; border-radius: 4px; }
        
        .membro-nome { font-size: 16px; color: var(--p); font-weight: bold; margin-bottom: 10px; display: block; }

        /* Área do Boneco */
        .viewport { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #e2e8f0; position: relative; }
        
        #corpo-container { 
            position: relative; 
            width: 400px; 
            height: 800px; 
            background: #fff;
            border: 2px solid #ccc;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            user-select: none;
        }
        
        #body-img { width: 100%; height: 100%; object-fit: contain; pointer-events: none; opacity: 0.7; }

        .membro { 
            position: absolute; 
            z-index: 5; 
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 123, 255, 0.3);
            border: 1px solid var(--p);
            font-size: 10px;
            color: #000;
            font-weight: bold;
            cursor: move; /* Indica que é arrastável */
            text-align: center;
            box-sizing: border-box;
        }
        .membro.active { background: rgba(40, 167, 69, 0.5); border: 2px solid var(--s); z-index: 10; }

        /* Botões */
        .btn { padding: 12px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .btn-side { background: var(--p); color: white; width: 100%; }
        .btn-copy { background: var(--s); color: white; width: 100%; margin-top: 20px; }
        
        #code-output { background: #222; color: #7f7; padding: 10px; font-family: monospace; font-size: 11px; border-radius: 4px; margin-top: 15px; white-space: pre-wrap; word-break: break-all; max-height: 120px; overflow-y: auto; }
        .hint { font-size: 11px; color: #666; font-style: italic; margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="sidebar">
    <h2>Design de Etiquetas</h2>
    <p class="hint">Clique e arraste a etiqueta no corpo ou use os sliders abaixo.</p>
    
    <button class="btn btn-side" onclick="toggleSide()">Trocar Frente/Costas</button>

    <div class="control-group" style="margin-top: 20px;">
        <label>Membro Selecionado</label>
        <span id="target-name" class="membro-nome">Cabeça (Nuca)</span>
        
        <label>Largura (Width %)</label>
        <input type="range" id="w-range" min="1" max="50" step="0.5" oninput="updateMembro()">
        <input type="number" id="w-num" oninput="syncInputs('w')"> %

        <label style="margin-top:10px;">Altura (Height %)</label>
        <input type="range" id="h-range" min="1" max="50" step="0.5" oninput="updateMembro()">
        <input type="number" id="h-num" oninput="syncInputs('h')"> %
    </div>

    <div class="control-group">
        <label>Posição Top (%)</label>
        <input type="range" id="t-range" min="0" max="100" step="0.1" oninput="updateMembro()">
        
        <label>Posição Left (%)</label>
        <input type="range" id="l-range" min="0" max="100" step="0.1" oninput="updateMembro()">
    </div>

    <label>Código Gerado:</label>
    <div id="code-output">&lt;div class="membro costas" data-nome="Cabeça (Nuca)" style="top: 21.4%; left: 42.1%; width: 12%; height: 5%; display: flex;"&gt;Nuca&lt;/div&gt;</div>
    
    <button class="btn btn-copy" onclick="copyCode()">Copiar Código HTML</button>
</div>

<div class="viewport">
    <div id="corpo-container">
        <img id="body-img" src="tras.png" alt="Corpo Humano">
        
        <div class="membro frente" data-nome="Cabeça" style="top: 7.7%; left: 44.1%; width: 12%; height: 5%; display: none;">Cabeça</div>
        <div class="membro frente" data-nome="Pescoço" style="top: 15.7%; left: 46%; width: 8%; height: 3%; display: none;">Pesc</div>
        <div class="membro frente" data-nome="Peito" style="top: 21.4%; left: 42.3%; width: 16%; height: 7%; display: none;">Peito</div>
        <div class="membro frente" data-nome="Abdômen" style="top: 29.5%; left: 41.6%; width: 16%; height: 8%; display: none;">Abdô</div>
        <div class="membro frente" data-nome="Pelvis" style="top: 40.8%; left: 43.6%; width: 12%; height: 6%; display: none;">Pelv</div>
        <div class="membro frente" data-nome="Coxa Esquerda" style="top: 49.4%; left: 51.5%; width: 10%; height: 13%; display: none;">Coxa E</div>
        <div class="membro frente" data-nome="Coxa Direita" style="top: 49%; left: 37.4%; width: 10%; height: 13%; display: none;">Coxa D</div>
        <div class="membro frente" data-nome="Joelho Esquerdo" style="top: 65.4%; left: 50.6%; width: 9%; height: 5%; display: none;">Jol E</div>
        <div class="membro frente" data-nome="Joelho Direito" style="top: 65%; left: 38.5%; width: 9.5%; height: 5.5%; display: none;">Jol D</div>
        <div class="membro frente" data-nome="Perna Inferior Esquerda" style="top: 72.4%; left: 50.6%; width: 10%; height: 10%; display: none;">Pern E</div>
        <div class="membro frente" data-nome="Perna Inferior Direita" style="top: 72.1%; left: 38%; width: 10%; height: 10%; display: none;">Pern D</div>
        <div class="membro frente" data-nome="Pé Esquerdo" style="top: 84.4%; left: 51.6%; width: 9.5%; height: 7%; display: none;">Pé E</div>
        <div class="membro frente active" data-nome="Pé Direito" style="top: 85.1%; left: 39.3%; width: 11%; height: 6%; display: none;">Pé D</div>
        <div class="membro frente" data-nome="Ombro Esquerdo" style="top: 17.9%; left: 59.3%; width: 14%; height: 5%; display: none;">Omb E</div>
        <div class="membro frente" data-nome="Ombro Direito" style="top: 18.1%; left: 26%; width: 15%; height: 5%; display: none;">Omb D</div>
        <div class="membro frente" data-nome="Antebraço Esquerdo" style="top: 26.3%; left: 24.8%; width: 8%; height: 8%; display: none;">Ant E</div>
        <div class="membro frente" data-nome="Antebraço Direito" style="top: 26.8%; left: 66.4%; width: 8%; height: 8%; display: none;">Ant D</div>
        <div class="membro frente" data-nome="Mão Esquerda" style="top: 47.6%; left: 69.3%; width: 11%; height: 7%; display: none;">Mão E</div>
        <div class="membro frente" data-nome="Mão Direita" style="top: 48%; left: 19.8%; width: 11.5%; height: 6%; display: none;">Mão D</div>

        <div class="membro costas active" data-nome="Cabeça (Nuca)" style="top: 21.4%; left: 42.1%; width: 12%; height: 5%; display: flex;">Nuca</div>
        <div class="membro costas" data-nome="Costas Superiores" style="top: 29.5%; left: 41.1%; width: 16%; height: 7%; display: flex;">C.Sup</div>
        <div class="membro costas" data-nome="Costas Inferiores" style="top: 38.6%; left: 40.3%; width: 16%; height: 8%; display: flex;">C.Inf</div>
        <div class="membro costas" data-nome="Glúteo Esquerdo" style="top: 47.6%; left: 34.9%; width: 10%; height: 7%; display: flex;">Glu E</div>
        <div class="membro costas" data-nome="Glúteo Direito" style="top: 48%; left: 50.7%; width: 10%; height: 7%; display: flex;">Glu D</div>
    </div>
</div>

<script>
    let activeMembro = null;
    let currentSide = 'frente';
    let isDragging = false;
    let offset = { x: 0, y: 0 };

    const container = document.getElementById('corpo-container');

    // Inicializa eventos de clique e arraste
    document.querySelectorAll('.membro').forEach(m => {
        m.addEventListener('mousedown', startDrag);
    });

    function startDrag(e) {
        if(activeMembro) activeMembro.classList.remove('active');
        activeMembro = e.target;
        activeMembro.classList.add('active');
        isDragging = true;

        // Calcula posição do clique dentro do membro para não "pular" pro centro
        const rect = activeMembro.getBoundingClientRect();
        offset.x = e.clientX - rect.left;
        offset.y = e.clientY - rect.top;

        // Preencher barra lateral
        updateSidebarInputs();
        updateCodeOutput();
    }

    window.addEventListener('mousemove', (e) => {
        if (!isDragging || !activeMembro) return;

        const containerRect = container.getBoundingClientRect();
        
        // Calcula nova posição em pixels
        let newX = e.clientX - containerRect.left - offset.x;
        let newY = e.clientY - containerRect.top - offset.y;

        // Converte para porcentagem
        let pctX = (newX / containerRect.width) * 100;
        let pctY = (newY / containerRect.height) * 100;

        // Limites (0 a 100%)
        pctX = Math.max(0, Math.min(pctX, 100 - parseFloat(activeMembro.style.width)));
        pctY = Math.max(0, Math.min(pctY, 100 - parseFloat(activeMembro.style.height)));

        activeMembro.style.left = pctX.toFixed(1) + '%';
        activeMembro.style.top = pctY.toFixed(1) + '%';

        updateSidebarInputs();
        updateCodeOutput();
    });

    window.addEventListener('mouseup', () => {
        isDragging = false;
    });

    function updateSidebarInputs() {
        if(!activeMembro) return;
        document.getElementById('target-name').innerText = activeMembro.dataset.nome;
        document.getElementById('w-range').value = parseFloat(activeMembro.style.width);
        document.getElementById('w-num').value = parseFloat(activeMembro.style.width);
        document.getElementById('h-range').value = parseFloat(activeMembro.style.height);
        document.getElementById('h-num').value = parseFloat(activeMembro.style.height);
        document.getElementById('t-range').value = parseFloat(activeMembro.style.top);
        document.getElementById('l-range').value = parseFloat(activeMembro.style.left);
    }

    function syncInputs(type) {
        document.getElementById(type+'-range').value = document.getElementById(type+'-num').value;
        updateMembro();
    }

    function updateMembro() {
        if(!activeMembro) return;
        activeMembro.style.width = document.getElementById('w-range').value + '%';
        activeMembro.style.height = document.getElementById('h-range').value + '%';
        activeMembro.style.top = document.getElementById('t-range').value + '%';
        activeMembro.style.left = document.getElementById('l-range').value + '%';
        document.getElementById('w-num').value = document.getElementById('w-range').value;
        document.getElementById('h-num').value = document.getElementById('h-range').value;
        updateCodeOutput();
    }

    function updateCodeOutput() {
        if(!activeMembro) return;
        const style = activeMembro.getAttribute('style').replace(' display: none;', '').trim();
        const code = `<div class="membro ${currentSide}" data-nome="${activeMembro.dataset.nome}" style="${style}">${activeMembro.innerText}</div>`;
        document.getElementById('code-output').innerText = code;
    }

    function toggleSide() {
        currentSide = currentSide === 'frente' ? 'costas' : 'frente';
        document.getElementById('body-img').src = currentSide === 'frente' ? 'frente.png' : 'tras.png';
        document.querySelectorAll('.membro').forEach(el => {
            el.style.display = el.classList.contains(currentSide) ? 'flex' : 'none';
        });
        activeMembro = null;
        document.getElementById('target-name').innerText = "Nenhum";
    }

    function copyCode() {
        const text = document.getElementById('code-output').innerText;
        if(text.includes('<div')) {
            navigator.clipboard.writeText(text);
            alert("Código copiado!");
        }
    }
</script>


</body></html>
